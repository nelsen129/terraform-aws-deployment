name: 'Terraform'

on:
  push:
  pull_request:
  
env:
  AWS_REGION: "us-west-1"

permissions:
  contents: read

jobs:
  terraform:
    name: 'Terraform'
    runs-on: ubuntu-latest
    environment: production

    # Use the Bash shell regardless whether the GitHub Actions runner is ubuntu-latest, macos-latest, or windows-latest
    defaults:
      run:
        shell: bash

    steps:
    # Checkout the repository to the GitHub Actions runner
      - name: Git clone the repository
        uses: actions/checkout@v3
        
      - name: Configure aws credentials
        uses: aws-actions/configure-aws-credentials@v1
        with:
          role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}
          role-session-name: TFRunnerSession
          aws-region: ${{ env.AWS_REGION }}
          
      - name: Create VPC
        run: |
          aws ec2 create-vpc --cidr-block 10.0.0.0/16
          